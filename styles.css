/* MOVI Client Form v3 — тёмная тема + расширенная анимация + чекбоксы */
:root{
  --bg:#0d1117; --panel:#111827; --ink:#e5e7eb; --muted:#9ca3af;
  --brand:#7c3aed; --brand-2:#6d28d9; --border:#1f2937; --success:#22c55e;
  --shadow:0 12px 30px rgba(0,0,0,.35); --radius:14px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:var(--bg); color:var(--ink);
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  -webkit-font-smoothing:antialiased; -webkit-tap-highlight-color:transparent;
}
.app{max-width:520px;margin:0 auto;min-height:100svh;display:flex;flex-direction:column;padding-bottom:env(safe-area-inset-bottom)}

.topbar{
  position:sticky;top:0;z-index:10;display:flex;align-items:center;gap:10px;
  padding:14px 14px 10px;background:color-mix(in oklab, var(--bg) 88%, transparent);
  backdrop-filter:blur(10px) saturate(160%); border-bottom:1px solid var(--border);
}
.brand{font-weight:900;letter-spacing:.4px}
.title{font-weight:800;opacity:.92}
.spacer{flex:1}

.content{flex:1;padding:14px}
.form{display:flex;flex-direction:column;gap:12px}
.group{display:flex;flex-direction:column;gap:8px}
label{font-size:13px;color:var(--muted)}
.hint{font-size:12px;color:var(--muted);margin-top:4px}

input,textarea,select{
  width:100%;padding:13px 12px;font-size:16px;border-radius:12px;
  border:1px solid var(--border);background:var(--panel);color:var(--ink);
  outline:none;transition:border .2s, box-shadow .2s;
}
input:focus,textarea:focus,select:focus{
  border-color:color-mix(in oklab, var(--brand) 50%, var(--border));
  box-shadow:0 0 0 3px color-mix(in oklab, var(--brand) 18%, transparent);
}
textarea{resize:vertical;min-height:84px}

.grid{display:flex;flex-direction:column;gap:12px}
.row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.grid-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px}

/* Чекбоксы */
.row-opts{grid-template-columns:auto auto auto 1fr;align-items:center}
.checkbox{display:inline-grid;grid-auto-flow:column;align-items:center;gap:8px;cursor:pointer;user-select:none}
.checkbox input{display:none}
.checkbox .box{width:20px;height:20px;border-radius:6px;border:1px solid var(--border);background:var(--panel);display:inline-block;position:relative;transition:.2s}
.checkbox input:checked + .box{background:color-mix(in oklab, var(--brand) 60%, #2a2f3b);border-color:transparent}
.checkbox input:checked + .box::after{content:'✓';position:absolute;inset:0;display:grid;place-items:center;font-weight:900;font-size:14px;color:#fff}

/* Переключатель (лифт) */
.switch{position:relative;width:52px;height:30px;justify-self:end}
.switch input{display:none}
.switch .slider{
  position:absolute;inset:0;border-radius:999px;background:#222a39;border:1px solid var(--border);
  transition:background .2s;
}
.switch .slider::after{
  content:'';position:absolute;top:3px;left:4px;width:24px;height:24px;border-radius:999px;background:#fff;
  transition:transform .2s;box-shadow:var(--shadow);
}
.switch input:checked + .slider{background:color-mix(in oklab, var(--brand) 36%, #222a39)}
.switch input:checked + .slider::after{transform:translateX(20px)}
.switch-label{justify-self:start;align-self:center;color:var(--ink)}

/* Тип доставки */
.chips{display:flex;gap:8px;margin-top:4px}
.chip{
  padding:10px 14px;border:1px solid var(--border);border-radius:999px;background:var(--panel);
  color:var(--ink);font-weight:700;cursor:pointer;box-shadow:var(--shadow);
}
.chip.active{background:var(--brand);border-color:transparent;color:#fff}

.btn-wrap{margin-top:6px}

/* Кнопка + анимация (как в v2) */
.order-btn{--tx:0px;position:relative;display:block;width:100%;height:56px;border-radius:999px;border:0;cursor:pointer;background:#111a24;color:#fff;box-shadow:0 12px 26px rgba(0,0,0,.28);overflow:hidden;outline:none}
.order-btn:focus-visible{box-shadow:0 0 0 3px color-mix(in oklab, var(--brand) 26%, transparent)}
.order-btn .label{position:relative;z-index:2;display:block;text-align:center;font-weight:800;font-size:16px;letter-spacing:.2px;transition:opacity .2s, transform .2s}
.order-btn.running .label{opacity:0;transform:translateY(-8px)}.order-btn.finished .label{opacity:1}
.order-btn .road{position:absolute;left:14px;right:14px;top:26px;height:4px;border-radius:999px;background:rgba(255,255,255,.08);overflow:hidden;opacity:0;transition:opacity .2s}
.order-btn.running .road{opacity:1}
.order-btn .road::after{content:'';position:absolute;left:-40px;top:0;right:0;height:4px;background:repeating-linear-gradient(90deg,#fff 0 10px, transparent 10px 20px);opacity:.28;animation:dash 450ms linear infinite}
@keyframes dash{to{transform:translateX(40px)}}
.pkg{position:absolute;left:18px;top:50%;transform:translateY(-50%);width:18px;height:18px;border-radius:4px;background:#fbbf24;box-shadow:0 6px 12px rgba(0,0,0,.35);opacity:0;z-index:1;transition:transform 420ms cubic-bezier(.2,.8,.2,1), opacity .2s}
.order-btn.stage-pkg .pkg{opacity:1}.order-btn.stage-pkg-load .pkg{transform:translate(120px,-50%)}
.truck{position:absolute;left:50%;top:50%;transform:translate(calc(-50% + var(--tx)),-50%);width:76px;height:30px;z-index:2;transition:transform 720ms cubic-bezier(.2,.8,.2,1)}
.truck .body{position:absolute;left:18px;top:3px;width:42px;height:22px;background:#e6ebf2;border-radius:4px;box-shadow:inset 0 -6px 12px rgba(0,0,0,.12)}
.truck .cab{position:absolute;left:0;top:5px;width:22px;height:20px;background:#ef4444;border-radius:4px 4px 2px 6px;box-shadow:inset -8px 0 12px rgba(0,0,0,.18)}
.door{position:absolute;top:3px;width:2px;height:22px;background:#fff;transform-origin:center left;opacity:.9}.door-l{left:36px;transform:rotate(-28deg)}.door-r{left:40px;transform-origin:center right;transform:rotate(28deg)}
.strap{position:absolute;top:2px;width:2px;height:12px;background:#fff;opacity:.9}.strap-l{left:30px;transform:rotate(-48deg);transform-origin:bottom left}.strap-r{left:52px;transform:rotate(48deg);transform-origin:bottom right}
.order-btn.stage-doors .door-l{transform:rotate(0deg)}.order-btn.stage-doors .door-r{transform:rotate(0deg)}.order-btn.stage-doors .strap-l,.order-btn.stage-doors .strap-r{opacity:0}
.wheel{position:absolute;bottom:-1px;width:12px;height:12px;background:#111;border:2px solid #333;border-radius:999px;box-shadow:inset 0 0 0 2px #000}.w1{left:20px}.w2{right:4px}
.light{position:absolute;top:9px;width:16px;height:8px;background:radial-gradient(closest-side, rgba(255,240,150,.9), rgba(255,240,150,0));filter:blur(1px);opacity:0}.l1{left:-12px;transform:rotate(180deg)}.l2{right:-12px}
.order-btn.stage-drive .light{opacity:1}
input,textarea,.order-btn{box-shadow:var(--shadow)}
